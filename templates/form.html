<!-- <!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css">
</head>
<body>

<h2>Code Checker</h2>

<form action="/" method="post">
  <label for="question">Question:</label><br>
  <input type="text" id="question" name="question"><br>
  <label for="code">Code:</label><br>
  <textarea id="code" name="code"></textarea><br>
  
  <input type="submit" value="Submit">
</form> 

{% if output %}
<h2>Output:</h2>
<p>{{ output }}</p>
{% endif %}

</body>
</html>


<script>
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
      lineNumbers: true,
      mode: "python",
      theme: "monokai"
    });
  </script>

<script>
    var code = editor.getValue();
    // Send the code to your server for processing
  </script> -->

<!DOCTYPE html>
<html>

  <head>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js"></script>
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.css">

  </head>
  <body>

    <h2>Code Checker</h2>

    <div id="form-and-output">
      <form action="/" method="post">
        <label for="topics"> Topics: </label>
        <select id="topics" name="topics">
          <option value="NA">---NA---</option>
          {% for option in topic %}
            <option value="{{ option }}" {% if option == topic %}selected{% endif %}>{{ option }}</option>
          {% endfor %}
        </select><br />
        <label for="question">Question:</label>
        <select id="questions" name="question">
          <option value="NA">---NA---</option>
          {% for option in question %}
            <option value="{{ option }}" {% if option == question %}selected{% endif %}>{{ option }}</option>
          {% endfor %}
        </select>
        <br />

        <label for="code">Code:</label><br />
        <textarea id="code" name="code">{{ code }}</textarea><br />

        <input type="submit" value="Submit" />

      </form>

      {% if output %}
      <h2>Output:</h2>
      <p>{{ output }}</p>
      {% endif %}
    </div>

    <script>
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
      lineNumbers: true,
      mode: "python",
      theme: "monokai"
    });
  </script>

    <script>
    var code = editor.getValue();
    // Send the code to your server for processing
  </script>

    <!--inserting script of reading json file-->
    <script async>
    var data;

    async function response3(){
        let response = await fetch('/static/problems.json');
        let info = await response.json()
        console.log(info)
        data=info;
        options(info)
    }

    response3();

    const topics=document.getElementById('topics');
    const question=document.getElementById('questions')

    function options(obj){
        obj.forEach((item) => {
            let option = document.createElement("option");
            option.value = item.concept;
            option.text=item.title;
            topics.appendChild(option);
        });
    }

    topics.addEventListener('change', function() {
        // Clear the second select box
<!--        question.innerHTML = "";-->

        // Find the selected topic in the data
        let selectedTopic = data.find(item => item.concept == this.value);

        // Create new option elements from the selected topic's questions for the second select box
        selectedTopic.questions.forEach((que) => {
            // console.log(que);
            let option = document.createElement("option");
            option.setAttribute('id',`${que.number}`)
            option.text = que.text;
            question.appendChild(option);
            // question.add(option);
        });
    });

    </script>
  </body>
</html>